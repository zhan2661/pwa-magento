{"version":3,"sources":["../../../src/components/MiniCart/product.js"],"names":["React","Component","Fragment","arrayOf","func","number","shape","string","Price","resourceUrl","Kebab","Section","classify","defaultClasses","imageWidth","imageHeight","Product","constructor","setState","isFavorite","props","openOptionsDrawer","item","isLoading","removeItemFromCart","state","options","classes","length","map","label","value","optionLabel","mask","styleImage","image","minHeight","width","backgroundImage","file","type","render","currencyCode","favoritesFill","fill","root","name","quantity","quantityRow","qty","quantityOperator","price","favoriteItem","editItem","removeItem","modal","quantitySelect","item_id","isRequired","product_type","quote_id","sku"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport { arrayOf, func, number, shape, string } from 'prop-types';\nimport { Price } from '@magento/peregrine';\nimport { resourceUrl } from 'src/drivers';\nimport Kebab from './kebab';\nimport Section from './section';\nimport classify from 'src/classify';\nimport defaultClasses from './product.css';\n\nconst imageWidth = 80;\nconst imageHeight = 100;\n\nclass Product extends Component {\n    static propTypes = {\n        classes: shape({\n            image: string,\n            modal: string,\n            name: string,\n            optionLabel: string,\n            options: string,\n            price: string,\n            quantity: string,\n            quantityOperator: string,\n            quantityRow: string,\n            quantitySelect: string,\n            root: string\n        }),\n        item: shape({\n            item_id: number.isRequired,\n            name: string.isRequired,\n            options: arrayOf(\n                shape({\n                    label: string,\n                    value: string\n                })\n            ),\n            price: number.isRequired,\n            product_type: string,\n            qty: number.isRequired,\n            quote_id: string,\n            sku: string.isRequired\n        }).isRequired,\n        currencyCode: string.isRequired,\n        openOptionsDrawer: func.isRequired\n    };\n\n    // TODO: Manage favorite items using GraphQL/REST when it is ready\n    constructor() {\n        super();\n        this.state = {\n            isLoading: false,\n            isFavorite: false\n        };\n    }\n\n    get options() {\n        const { classes, item } = this.props;\n        const options = item.options;\n\n        return options && options.length > 0 ? (\n            <dl className={classes.options}>\n                {options.map(({ label, value }) => (\n                    <Fragment key={`${label}${value}`}>\n                        <dt className={classes.optionLabel}>\n                            {label} : {value}\n                        </dt>\n                    </Fragment>\n                ))}\n            </dl>\n        ) : null;\n    }\n\n    get mask() {\n        const { classes } = this.props;\n        return this.state.isLoading ? <div className={classes.mask} /> : null;\n    }\n\n    styleImage(image) {\n        return {\n            minHeight: imageHeight, // min-height instead of height so image will always align with grid bottom\n            width: imageWidth,\n            backgroundImage: `url(${resourceUrl(image.file, {\n                type: 'image-product',\n                width: imageWidth\n            })})`\n        };\n    }\n\n    render() {\n        const { options, props, mask } = this;\n        const { classes, item, currencyCode } = props;\n        const favoritesFill = { fill: 'rgb(var(--venia-teal))' };\n\n        return (\n            <li className={classes.root}>\n                <div\n                    className={classes.image}\n                    style={this.styleImage(item.image)}\n                />\n                <div className={classes.name}>{item.name}</div>\n                {options}\n                <div className={classes.quantity}>\n                    <div className={classes.quantityRow}>\n                        <span>{item.qty}</span>\n                        <span className={classes.quantityOperator}>{'Ã—'}</span>\n                        <span className={classes.price}>\n                            <Price\n                                currencyCode={currencyCode}\n                                value={item.price}\n                            />\n                        </span>\n                    </div>\n                </div>\n                {mask}\n                <Kebab>\n                    <Section\n                        text=\"Add to favorites\"\n                        onClick={this.favoriteItem}\n                        icon=\"Heart\"\n                        iconAttributes={\n                            this.state.isFavorite ? favoritesFill : {}\n                        }\n                    />\n                    <Section\n                        text=\"Edit item\"\n                        onClick={this.editItem}\n                        icon=\"Edit2\"\n                    />\n                    <Section\n                        text=\"Remove item\"\n                        onClick={this.removeItem}\n                        icon=\"Trash\"\n                    />\n                </Kebab>\n            </li>\n        );\n    }\n\n    favoriteItem = () => {\n        this.setState({\n            isFavorite: true\n        });\n    };\n\n    editItem = () => {\n        this.props.openOptionsDrawer(this.props.item);\n    };\n\n    removeItem = () => {\n        this.setState({\n            isLoading: true\n        });\n\n        // TODO: prompt user to confirm this action\n        this.props.removeItemFromCart({\n            item: this.props.item\n        });\n    };\n}\n\nexport default classify(defaultClasses)(Product);\n"],"file":"product.js"}