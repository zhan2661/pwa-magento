{"version":3,"sources":["../../src/util/appendOptionsToPayload.js"],"names":["findMatchingVariant","appendOptionsToPayload","payload","optionSelections","optionCodes","item","variants","Map","option","configurable_options","set","attribute_id","attribute_code","options","Array","from","id","value","option_id","option_value","selectedVariant","Object","assign","parentSku","sku","product"],"mappings":"AAAA,OAAOA,mBAAP;;AAEA,MAAMC,sBAAsB,GAAG,CAC3BC,OAD2B,EAE3BC,gBAF2B,EAG3BC,WAAW,GAAG,IAHa,KAI1B;AACD,QAAM;AAAEC,IAAAA;AAAF,MAAWH,OAAjB;AACA,QAAM;AAAEI,IAAAA;AAAF,MAAeD,IAArB;;AAEA,MAAI,CAACD,WAAL,EAAkB;AACdA,IAAAA,WAAW,GAAG,IAAIG,GAAJ,EAAd;;AACA,SAAK,MAAMC,MAAX,IAAqBH,IAAI,CAACI,oBAA1B,EAAgD;AAC5CL,MAAAA,WAAW,CAACM,GAAZ,CAAgBF,MAAM,CAACG,YAAvB,EAAqCH,MAAM,CAACI,cAA5C;AACH;AACJ;;AAED,QAAMC,OAAO,GAAGC,KAAK,CAACC,IAAN,CAAWZ,gBAAX,EAA6B,CAAC,CAACa,EAAD,EAAKC,KAAL,CAAD,MAAkB;AAC3DC,IAAAA,SAAS,EAAEF,EADgD;AAE3DG,IAAAA,YAAY,EAAEF;AAF6C,GAAlB,CAA7B,CAAhB;AAKA,QAAMG,eAAe,GAAGpB,mBAAmB,CAAC;AACxCM,IAAAA,QADwC;AAExCF,IAAAA,WAFwC;AAGxCD,IAAAA;AAHwC,GAAD,CAA3C;AAMA,MAAI,CAACiB,eAAL,EAAsB,OAAOlB,OAAP;AAEtBmB,EAAAA,MAAM,CAACC,MAAP,CAAcpB,OAAd,EAAuB;AACnBW,IAAAA,OADmB;AAEnBU,IAAAA,SAAS,EAAElB,IAAI,CAACmB,GAFG;AAGnBnB,IAAAA,IAAI,EAAEgB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBF,eAAe,CAACK,OAAlC;AAHa,GAAvB;AAMA,SAAOvB,OAAP;AACH,CAnCD;;AAqCA,eAAeD,sBAAf","sourcesContent":["import findMatchingVariant from './findMatchingProductVariant';\n\nconst appendOptionsToPayload = (\n    payload,\n    optionSelections,\n    optionCodes = null\n) => {\n    const { item } = payload;\n    const { variants } = item;\n\n    if (!optionCodes) {\n        optionCodes = new Map();\n        for (const option of item.configurable_options) {\n            optionCodes.set(option.attribute_id, option.attribute_code);\n        }\n    }\n\n    const options = Array.from(optionSelections, ([id, value]) => ({\n        option_id: id,\n        option_value: value\n    }));\n\n    const selectedVariant = findMatchingVariant({\n        variants,\n        optionCodes,\n        optionSelections\n    });\n\n    if (!selectedVariant) return payload;\n\n    Object.assign(payload, {\n        options,\n        parentSku: item.sku,\n        item: Object.assign({}, selectedVariant.product)\n    });\n\n    return payload;\n};\n\nexport default appendOptionsToPayload;\n"],"file":"appendOptionsToPayload.js"}