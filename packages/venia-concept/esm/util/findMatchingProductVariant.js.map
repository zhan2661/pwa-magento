{"version":3,"sources":["../../src/util/findMatchingProductVariant.js"],"names":["findMatchingVariant","variants","optionCodes","optionSelections","find","attributes","product","customAttributes","reduce","map","code","value_index","Map","set","id","value","get","matchesStandardAttribute","matchesCustomAttribute"],"mappings":"AAAA,MAAMA,mBAAmB,GAAG,CAAC;AAAEC,EAAAA,QAAF;AAAYC,EAAAA,WAAZ;AAAyBC,EAAAA;AAAzB,CAAD,KAAiD;AACzE,SAAOF,QAAQ,CAACG,IAAT,CAAc,CAAC;AAAEC,IAAAA,UAAF;AAAcC,IAAAA;AAAd,GAAD,KAA6B;AAC9C,UAAMC,gBAAgB,GAAG,CAACF,UAAU,IAAI,EAAf,EAAmBG,MAAnB,CACrB,CAACC,GAAD,EAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAAN,KAAgC,IAAIC,GAAJ,CAAQH,GAAR,EAAaI,GAAb,CAAiBH,IAAjB,EAAuBC,WAAvB,CADX,EAErB,IAAIC,GAAJ,EAFqB,CAAzB;;AAKA,SAAK,MAAM,CAACE,EAAD,EAAKC,KAAL,CAAX,IAA0BZ,gBAA1B,EAA4C;AACxC,YAAMO,IAAI,GAAGR,WAAW,CAACc,GAAZ,CAAgBF,EAAhB,CAAb;AACA,YAAMG,wBAAwB,GAAGX,OAAO,CAACI,IAAD,CAAP,KAAkBK,KAAnD;AACA,YAAMG,sBAAsB,GAAGX,gBAAgB,CAACS,GAAjB,CAAqBN,IAArB,MAA+BK,KAA9D,CAHwC,CAKxC;AACA;AACA;;AACA,UAAI,CAACE,wBAAD,IAA6B,CAACC,sBAAlC,EAA0D;AACtD,eAAO,KAAP;AACH;AACJ,KAjB6C,CAmB9C;AACA;;;AACA,WAAO,IAAP;AACH,GAtBM,CAAP;AAuBH,CAxBD;;AA0BA,eAAelB,mBAAf","sourcesContent":["const findMatchingVariant = ({ variants, optionCodes, optionSelections }) => {\n    return variants.find(({ attributes, product }) => {\n        const customAttributes = (attributes || []).reduce(\n            (map, { code, value_index }) => new Map(map).set(code, value_index),\n            new Map()\n        );\n\n        for (const [id, value] of optionSelections) {\n            const code = optionCodes.get(id);\n            const matchesStandardAttribute = product[code] === value;\n            const matchesCustomAttribute = customAttributes.get(code) === value;\n\n            // if any option selection fails to match any standard attribute\n            // and also fails to match any custom attribute\n            // then this isn't the correct variant\n            if (!matchesStandardAttribute && !matchesCustomAttribute) {\n                return false;\n            }\n        }\n\n        // otherwise, every option selection matched\n        // and this is the correct variant\n        return true;\n    });\n};\n\nexport default findMatchingVariant;\n"],"file":"findMatchingProductVariant.js"}