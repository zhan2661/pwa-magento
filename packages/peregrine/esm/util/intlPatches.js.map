{"version":3,"sources":["../../src/util/intlPatches.js"],"names":["intlFormats","USD","symbol","decimal","groupDelim","GBP","EUR","IntlPatches","formatToPartsPatch","currency","maximumFractionDigits","useGrouping","num","format","integer","fraction","toFixed","match","parts","type","value","intParts","firstGroupLength","length","push","JSON","stringify","slice","groups","map","intPart","groupDelimJSON","intAndGroupParts","parse","join","concat","toParts","formatToParts","resolvedOptions"],"mappings":"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","sourcesContent":["/**\n * A [ponyfill](https://github.com/sindresorhus/ponyfill) is an opt-in polyfill,\n * which replaces missing builtins on older or non-compliant platforms, but\n * without monkey-patching the native API.\n *\n * Many browsers do not yet support Intl.NumberFormat.prototype.formatToParts,\n * which is tracked here: https://github.com/tc39/proposal-intl-formatToParts\n *\n * The polyfill available in that repository covers many edge cases, but it's\n * more functionality than we need at this stage, it's not distributed over\n * NPM, and it's 18kb. The below\n * [ponyfill](https://github.com/sindresorhus/ponyfill) is not fully compliant,\n * but it'll do for now.\n *\n * TODO: Replace with a formally maintained, but small-enough, ponyfill.\n */\n\nconst intlFormats = {\n    USD: {\n        symbol: '$',\n        decimal: '.',\n        groupDelim: ','\n    },\n    GBP: {\n        symbol: '£',\n        decimal: '.',\n        groupDelim: ','\n    },\n    EUR: {\n        symbol: '€',\n        decimal: '.',\n        groupDelim: ','\n    }\n};\n\nconst IntlPatches = {\n    formatToPartsPatch({ currency, maximumFractionDigits, useGrouping }, num) {\n        const format = intlFormats[currency] || {\n            ...intlFormats.USD,\n            symbol: currency\n        };\n        const { symbol, decimal, groupDelim } = format;\n        let [integer, fraction] = num\n            .toFixed(maximumFractionDigits)\n            .match(/\\d+/g);\n        const parts = [{ type: 'currency', value: symbol }];\n        if (useGrouping !== false) {\n            const intParts = [];\n            const firstGroupLength = integer.length % 3;\n            if (firstGroupLength > 0) {\n                intParts.push(\n                    JSON.stringify({\n                        type: 'integer',\n                        value: integer.slice(0, firstGroupLength)\n                    })\n                );\n                integer = integer.slice(firstGroupLength);\n            }\n\n            const groups = integer.match(/\\d{3}/g);\n\n            if (groups) {\n                intParts.push(\n                    ...groups.map(intPart =>\n                        JSON.stringify({\n                            type: 'integer',\n                            value: intPart\n                        })\n                    )\n                );\n            }\n\n            const groupDelimJSON =\n                ',' +\n                JSON.stringify({\n                    type: 'group',\n                    value: groupDelim\n                }) +\n                ',';\n\n            const intAndGroupParts = JSON.parse(\n                `[${intParts.join(groupDelimJSON)}]`\n            );\n\n            parts.push(...intAndGroupParts);\n        } else {\n            parts.push({ type: 'integer', value: integer });\n        }\n        return parts.concat([\n            { type: 'decimal', value: decimal },\n            { type: 'fraction', value: fraction }\n        ]);\n    },\n\n    toParts(num) {\n        return this.formatToParts\n            ? this.formatToParts(num)\n            : IntlPatches.formatToPartsPatch(this.resolvedOptions(), num);\n    }\n};\nexport default IntlPatches;\n"],"file":"intlPatches.js"}