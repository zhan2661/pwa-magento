{"version":3,"sources":["../../../src/RestApi/Magento2/M2ApiResponseError.js"],"names":["M2ApiResponseError","Error","constructor","method","resourceUrl","response","bodyText","args","body","JSON","parse","message","trace","rest","addl","Object","entries","length","stringify","e","status","statusText","captureStackTrace"],"mappings":";;;;AAAA,eAAe,MAAMA,kBAAN,SAAiCC,KAAjC,CAAuC;AAClDC,EAAAA,WAAW,CAAC;AAAEC,IAAAA,MAAF;AAAUC,IAAAA,WAAV;AAAuBC,IAAAA,QAAvB;AAAiCC,IAAAA;AAAjC,GAAD,EAA8C,GAAGC,IAAjD,EAAuD;AAC9D,QAAIC,IAAI,GAAI,EAAZ;;AACA,QAAI;AACA,0BAAoCC,IAAI,CAACC,KAAL,CAAWJ,QAAX,CAApC;AAAA,YAAM;AAAEK,QAAAA,OAAF;AAAWC,QAAAA;AAAX,OAAN;AAAA,YAA2BC,IAA3B;;AACA,UAAIF,OAAJ,EAAa;AACTH,QAAAA,IAAI,IAAK,iBAAgBG,OAAQ,IAAjC;AACH;;AACD,YAAMG,IAAI,GAAGC,MAAM,CAACC,OAAP,CAAeH,IAAf,CAAb;;AACA,UAAIC,IAAI,CAACG,MAAL,GAAc,CAAlB,EAAqB;AACjBT,QAAAA,IAAI,IAAK,yBAAwBC,IAAI,CAACS,SAAL,CAC7BL,IAD6B,EAE7B,IAF6B,EAG7B,CAH6B,CAI/B,MAJF;AAKH;;AACD,UAAID,KAAJ,EAAW;AACPJ,QAAAA,IAAI,IAAK,gCAA+BI,KAAM,EAA9C;AACH;;AACDJ,MAAAA,IAAI,IAAI,IAAR;AACH,KAjBD,CAiBE,OAAOW,CAAP,EAAU;AACRX,MAAAA,IAAI,GAAGF,QAAP;AACH;;AACD,UACK,GAAEH,MAAO,IAAGC,WAAY,cAAaC,QAAQ,CAACe,MAAO,IAClDf,QAAQ,CAACgB,UACZ,SAAQb,IAAK,EAHlB,EAII,GAAGD,IAJP;;AAMA,QAAIN,KAAK,CAACqB,iBAAV,EAA6B;AACzBrB,MAAAA,KAAK,CAACqB,iBAAN,CAAwB,IAAxB,EAA8BtB,kBAA9B;AACH;;AACD,SAAKK,QAAL,GAAgBA,QAAhB;AACA,SAAKF,MAAL,GAAcA,MAAd;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACH;;AAnCiD","sourcesContent":["export default class M2ApiResponseError extends Error {\n    constructor({ method, resourceUrl, response, bodyText }, ...args) {\n        let body = ``;\n        try {\n            const { message, trace, ...rest } = JSON.parse(bodyText);\n            if (message) {\n                body += `Message:\\n\\n  ${message}\\n`;\n            }\n            const addl = Object.entries(rest);\n            if (addl.length > 0) {\n                body += `\\nAdditional info:\\n\\n${JSON.stringify(\n                    rest,\n                    null,\n                    4\n                )}\\n\\n`;\n            }\n            if (trace) {\n                body += `Magento PHP stack trace: \\n\\n${trace}`;\n            }\n            body += '\\n';\n        } catch (e) {\n            body = bodyText;\n        }\n        super(\n            `${method} ${resourceUrl} responded ${response.status} ${\n                response.statusText\n            }: \\n\\n${body}`,\n            ...args\n        );\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, M2ApiResponseError);\n        }\n        this.response = response;\n        this.method = method;\n        this.resourceUrl = resourceUrl;\n    }\n}\n"],"file":"M2ApiResponseError.js"}