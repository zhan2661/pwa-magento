{"version":3,"sources":["../../../src/RestApi/Magento2/M2ApiResponseError.js"],"names":["M2ApiResponseError","method","resourceUrl","response","bodyText","body","JSON","parse","message","trace","rest","addl","Object","entries","length","stringify","e","args","status","statusText","Error","captureStackTrace"],"mappings":";;;;;;;;IAAqBA,kB;;;;;AACjB,oCAAkE;AAAA;;AAAA;;AAAA,QAApDC,MAAoD,QAApDA,MAAoD;AAAA,QAA5CC,WAA4C,QAA5CA,WAA4C;AAAA,QAA/BC,QAA+B,QAA/BA,QAA+B;AAAA,QAArBC,QAAqB,QAArBA,QAAqB;;AAAA;;AAC9D,QAAIC,IAAI,KAAR;;AACA,QAAI;AAAA,wBACoCC,IAAI,CAACC,KAAL,CAAWH,QAAX,CADpC;AAAA,UACQI,OADR,eACQA,OADR;AAAA,UACiBC,KADjB,eACiBA,KADjB;AAAA,UAC2BC,IAD3B;;AAEA,UAAIF,OAAJ,EAAa;AACTH,QAAAA,IAAI,4BAAqBG,OAArB,OAAJ;AACH;;AACD,UAAMG,IAAI,GAAGC,MAAM,CAACC,OAAP,CAAeH,IAAf,CAAb;;AACA,UAAIC,IAAI,CAACG,MAAL,GAAc,CAAlB,EAAqB;AACjBT,QAAAA,IAAI,oCAA6BC,IAAI,CAACS,SAAL,CAC7BL,IAD6B,EAE7B,IAF6B,EAG7B,CAH6B,CAA7B,SAAJ;AAKH;;AACD,UAAID,KAAJ,EAAW;AACPJ,QAAAA,IAAI,2CAAoCI,KAApC,CAAJ;AACH;;AACDJ,MAAAA,IAAI,IAAI,IAAR;AACH,KAjBD,CAiBE,OAAOW,CAAP,EAAU;AACRX,MAAAA,IAAI,GAAGD,QAAP;AACH;;AArB6D,sCAANa,IAAM;AAANA,MAAAA,IAAM;AAAA;;AAsB9D,oJACOhB,MADP,cACiBC,WADjB,wBAC0CC,QAAQ,CAACe,MADnD,cAEQf,QAAQ,CAACgB,UAFjB,mBAGad,IAHb,UAIOY,IAJP;;AAMA,QAAIG,KAAK,CAACC,iBAAV,EAA6B;AACzBD,MAAAA,KAAK,CAACC,iBAAN,gCAA8BrB,kBAA9B;AACH;;AACD,UAAKG,QAAL,GAAgBA,QAAhB;AACA,UAAKF,MAAL,GAAcA,MAAd;AACA,UAAKC,WAAL,GAAmBA,WAAnB;AAjC8D;AAkCjE;;;mBAnC2CkB,K;;SAA3BpB,kB","sourcesContent":["export default class M2ApiResponseError extends Error {\n    constructor({ method, resourceUrl, response, bodyText }, ...args) {\n        let body = ``;\n        try {\n            const { message, trace, ...rest } = JSON.parse(bodyText);\n            if (message) {\n                body += `Message:\\n\\n  ${message}\\n`;\n            }\n            const addl = Object.entries(rest);\n            if (addl.length > 0) {\n                body += `\\nAdditional info:\\n\\n${JSON.stringify(\n                    rest,\n                    null,\n                    4\n                )}\\n\\n`;\n            }\n            if (trace) {\n                body += `Magento PHP stack trace: \\n\\n${trace}`;\n            }\n            body += '\\n';\n        } catch (e) {\n            body = bodyText;\n        }\n        super(\n            `${method} ${resourceUrl} responded ${response.status} ${\n                response.statusText\n            }: \\n\\n${body}`,\n            ...args\n        );\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, M2ApiResponseError);\n        }\n        this.response = response;\n        this.method = method;\n        this.resourceUrl = resourceUrl;\n    }\n}\n"],"file":"M2ApiResponseError.js"}